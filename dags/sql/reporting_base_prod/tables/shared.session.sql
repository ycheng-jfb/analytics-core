CREATE TABLE if not exists shared.session (
	SESSION_ID NUMBER(38,0) NOT NULL PRIMARY KEY,
    SESSION_LOCAL_DATETIME TIMESTAMP_TZ(9),
	STORE_ID NUMBER(38,0),
    VISITOR_ID NUMBER(38,0),
	CUSTOMER_ID NUMBER(38,0),
    MEMBERSHIP_ID NUMBER(38,0),
	PREVIOUS_CUSTOMER_SESSION_ID NUMBER(38,0),
	PREVIOUS_CUSTOMER_SESSION_LOCAL_DATETIME TIMESTAMP_TZ(9),
	NEXT_CUSTOMER_SESSION_ID NUMBER(38,0),
	NEXT_CUSTOMER_SESSION_LOCAL_DATETIME TIMESTAMP_TZ(9),
	PREVIOUS_VISITOR_SESSION_ID NUMBER(38,0),
	PREVIOUS_VISITOR_SESSION_LOCAL_DATETIME TIMESTAMP_TZ(9),
	NEXT_VISITOR_SESSION_ID NUMBER(38,0),
	NEXT_VISITOR_SESSION_LOCAL_DATETIME TIMESTAMP_TZ(9),
	IS_MIGRATED_SESSION BOOLEAN,
	MIGRATION_PREVIOUS_SESSION_ID NUMBER(38,0),
    MEMBERSHIP_STATE VARCHAR,
    DAILY_LEAD_TENURE NUMBER(38,0),
	MONTHLY_VIP_TENURE NUMBER(38,0),
    PLATFORM VARCHAR,
    BROWSER VARCHAR,
    OS VARCHAR,
    DM_GATEWAY_TEST_SITE_ID NUMBER(38,0),
	DM_GATEWAY_ID NUMBER(38,0),
	DM_SITE_ID NUMBER(38,0),
	GATEWAY_TYPE VARCHAR,
	GATEWAY_SUB_TYPE VARCHAR,
    IS_LOGIN_ACTION BOOLEAN,
    IS_LOGOUT_ACTION BOOLEAN,
    IS_ATB_ACTION BOOLEAN,
	ADD_TO_CART_COUNT NUMBER(38,0),
    ECHO_ADD_TO_CART_COUNT NUMBER(38,0),
    IS_MALE_GATEWAY BOOLEAN,
    IS_MALE_SESSION_ACTION BOOLEAN,
    IS_MALE_SESSION BOOLEAN,
    IS_MALE_CUSTOMER BOOLEAN,
    IS_QUIZ_START_ACTION BOOLEAN,
    IS_QUIZ_COMPLETE_ACTION BOOLEAN,
    IS_SKIP_QUIZ_ACTION BOOLEAN,
    IS_LEAD_REGISTRATION_ACTION BOOLEAN,
    IS_SPEEDY_REGISTRATION_ACTION BOOLEAN,
    IS_QUIZ_REGISTRATION_ACTION BOOLEAN,
    IS_SKIP_QUIZ_REGISTRATION_ACTION BOOLEAN,
    IS_SKIP_MONTH_ACTION BOOLEAN,
    IP VARCHAR,
	REFERER VARCHAR,
	SEO_VENDOR VARCHAR,
	URI VARCHAR,
	USER_AGENT VARCHAR,
    CLICKID VARCHAR,
	SHAREDID VARCHAR,
	IRAD VARCHAR,
	MPID VARCHAR,
	IRMP VARCHAR,
    UTM_MEDIUM VARCHAR,
	UTM_SOURCE VARCHAR,
	UTM_CAMPAIGN VARCHAR,
	UTM_CONTENT VARCHAR,
	UTM_TERM VARCHAR,
    CCODE VARCHAR,
	PCODE VARCHAR,
    SESSION_DETAIL_AB_TEST_VALUES VARCHAR,
    MEMBERSHIP_DETAIL_AB_TEST_VALUES VARCHAR,
    IS_BOT_OLD BOOLEAN,
    IS_BOT BOOLEAN,
    IS_TEST_CUSTOMER_ACCOUNT BOOLEAN,
    GA_UTM_MEDIUM VARCHAR,
    GA_UTM_SOURCE VARCHAR,
	GA_UTM_CAMPAIGN VARCHAR,
	GA_UTM_TERM VARCHAR,
    GA_UTM_CONTENT VARCHAR,
	GA_DEVICE VARCHAR,
	GA_BROWSER VARCHAR,
	GA_REFERRAL_PATH VARCHAR,
	GA_IS_LEAD VARCHAR,
	GA_IS_VIP VARCHAR,
	GA_CUSTOMER_ID VARCHAR,
	META_ORIGINAL_SESSION_ID number(38,0),
	MEDIA_SOURCE_HASH NUMBER(38,0),
	META_ROW_HASH NUMBER(38,0),
	META_CREATE_DATETIME TIMESTAMP_LTZ(9) DEFAULT CURRENT_TIMESTAMP,
	META_UPDATE_DATETIME TIMESTAMP_LTZ(9) DEFAULT CURRENT_TIMESTAMP
) CLUSTER BY (TRUNC(session_id, -7)); --10M row clusters
